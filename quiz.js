// ==========================================================
// الإعدادات العامة للمشروع
// ==========================================================

let currentPage = 1;
const questionsPerPage = 20;
// قمنا بوضع العدد 120 الآن، لكنه سيعمل فقط مع الـ 30 سؤالاً الأولى.
const totalQuestions = 120; 
const totalPages = Math.ceil(totalQuestions / questionsPerPage);

// ==========================================================
// مصفوفة الأسئلة (الدفعة الأولى: 30 سؤالاً في ديداكتيك اللغة العربية والمستجدات)
// ==========================================================
const quizQuestions = [
    // --------------------------------------------------------------------------------------
    // القسم 1: ديداكتيك اللغة العربية (20 سؤالاً)
    // --------------------------------------------------------------------------------------
    {
        question: "ما هو الإجراء الديداكتيكي الذي يضمن تحويل مهارة 'القراءة الجهرية' من مجرد قراءة آلية إلى قراءة معبرة ووظيفية؟",
        options: ["التركيز على سرعة النطق فقط", "قراءة المعلم النموذجية للنص فقط", "الربط الصريح بين الأداء القرائي (الطلاقة) وفهم المعنى والتعبير عن الانفعالات التي يحملها النص", "إجبار جميع المتعلمين على قراءة نفس الجزء بغض النظر عن مستواهم", "كل الخيارات السابقة خاطئة"],
        answer: "الربط الصريح بين الأداء القرائي (الطلاقة) وفهم المعنى والتعبير عن الانفعالات التي يحملها النص",
        rationale: "القراءة الوظيفية يجب أن تربط بين الطلاقة اللغوية والفهم العميق للمحتوى والتعبير عنه بنبرة مناسبة، وليس مجرد فك للرموز أو قياس للسرعة (Prosodie)."
    },
    {
        question: "في تدريس مكون 'الظواهر اللغوية' (النحو) بالمستويات العليا، ما هي أفضل مقاربة لتمكين المتعلم من بناء القاعدة بنفسه؟",
        options: ["المقاربة الاستنباطية (من القاعدة إلى الأمثلة)", "المقاربة السلوكية التكرارية", "المقاربة الاستقرائية (من الأمثلة والنصوص إلى القاعدة)", "المقاربة التلقينية المباشرة"],
        answer: "المقاربة الاستقرائية (من الأمثلة والنصوص إلى القاعدة)",
        rationale: "المنهج الاستقرائي يتماشى مع البنائية، حيث يبدأ المتعلم بتحليل أمثلة ونصوص وظيفية لاستنتاج القاعدة بنفسه (مرحلة الملاحظة والاكتشاف)، ثم تأتي مرحلة المأسسة."
    },
    {
        question: "ما هي الوظيفة الأساسية لمرحلة 'بناء التوقعات' (Pré-lecture) في حصص القراءة؟",
        options: ["تحديد الأخطاء الإملائية الشائعة", "ربط العنوان والصورة والمعلومات القبلية للمتعلم بمحتوى النص لتسهيل الفهم اللاحق", "قراءة النص بصوت جهوري سليم", "تحديد نوع النص (سردي، إخباري...) بشكل نهائي"],
        answer: "ربط العنوان والصورة والمعلومات القبلية للمتعلم بمحتوى النص لتسهيل الفهم اللاحق",
        rationale: "تهدف هذه المرحلة إلى تفعيل المعارف القبلية للمتعلم (Activation des connaissances antérieures) وتهيئته ذهنياً لتقبل محتوى النص الجديد، وهي خطوة إجرائية أساسية في المقاربة المنهجية."
    },
    {
        question: "في ديداكتيك الكتابة، ما هي المرحلة التي يركز فيها المتعلم على مراجعة 'انسجام النص' و 'تطور الأفكار'؟",
        options: ["مرحلة التخطيط", "مرحلة الإنتاج الأولي (المسودة)", "مرحلة المراجعة (Réécriture)", "مرحلة النقل الخطّي"],
        answer: "مرحلة المراجعة (Réécriture)",
        rationale: "المراجعة تركز على الجوانب المنهجية والمنطقية (الانسجام، التسلسل، ووضوح الأفكار)، بينما التصحيح يركز على الجوانب اللغوية (النحو، الصرف، الإملاء)."
    },
    {
        question: "ما هو الفرق الديداكتيكي بين 'الوضعية التواصلية' و 'الحكاية' في المستويات الدنيا؟",
        options: ["الوضعية تركز على الإنتاج الشفوي الفوري، والحكاية تركز على التلقي وتنمية الرصيد", "الوضعية تقوّم كتابة النصوص، والحكاية تقوّم القراءة", "لا فرق جوهري بينهما", "الوضعية تدرس في المستوى الأول فقط، والحكاية في المستوى الثاني فقط"],
        answer: "الوضعية تركز على الإنتاج الشفوي الفوري، والحكاية تركز على التلقي وتنمية الرصيد",
        rationale: "الوضعية التواصلية تهدف إلى استخدام 'الفعل الكلامي' (Acte de langage) في سياق وظيفي، بينما الحكاية هي رافد لغوي وثقافي لتنمية مهارات الاستماع والفهم."
    },
    {
        question: "أي من تقنيات التدريس تعتمد على تجميع الأخطاء الأكثر شيوعاً في الفصل لإنشاء حصص دعم موجهة للقصور المشترك؟",
        options: ["التقويم التجميعي", "التحليل البعدي للأخطاء (Analyse Postérieure des Erreurs)", "التعاقد الديداكتيكي", "التخطيط الفردي"],
        answer: "التحليل البعدي للأخطاء (Analyse Postérieure des Erreurs)",
        rationale: "التحليل البعدي للأخطاء هو إجراء منهجي يسمح بتصنيف الأخطاء وتحديد أصولها الديداكتيكية أو المعرفية لوضع خطة دعم جماعية أو فردية فعالة."
    },
    {
        question: "في تدريس مكون 'الاستماع والفهم'، ما هي أهمية مرحلة 'التسميع' (Première écoute)؟",
        options: ["مقارنة أداء المتعلمين ببعضهم", "تنمية مهارات الملاحظة السمعية وتأسيس الفهم الأولي والاحتفاظ بالمعلومات", "إصدار حكم نهائي على مستوى المتعلم", "كل الخيارات السابقة خاطئة"],
        answer: "تنمية مهارات الملاحظة السمعية وتأسيس الفهم الأولي والاحتفاظ بالمعلومات",
        rationale: "التسميع الأولي يركز على الفهم العام وتلقي الرسالة ككل (Compréhension Globale) قبل الدخول في التفاصيل والتحليل."
    },
    {
        question: "ما هو الهدف الأسمى من إدراج 'الأنشطة الموازية' (Activités Parallèles) في المنهاج الدراسي؟",
        options: ["تخفيف الضغط على المقررات الرسمية", "تنمية الكفايات المستعرضة والشخصية (الاجتماعية، الثقافية، الفنية) وإثراء شخصية المتعلم", "إلزام المتعلم بحضور إضافي", "استبدال الأنشطة الصفية بالخارجية"],
        answer: "تنمية الكفايات المستعرضة والشخصية (الاجتماعية، الثقافية، الفنية) وإثراء شخصية المتعلم",
        rationale: "الأنشطة الموازية تساعد على تطوير الجوانب الوجدانية والمهارات العرضية (Soft Skills) التي لا يغطيها المنهج الرسمي بالكامل."
    },
    {
        question: "أي من الظواهر التالية يعتبر 'خطأً نظامياً' (Erreur Systématique) يتطلب معالجة معمقة؟",
        options: ["نسيان المتعلم لكلمة عابرة في النص", "الخطأ المتكرر لدى المتعلم في تطبيق قاعدة ثابتة (مثلاً، عدم رفع الفاعل باستمرار)", "الخطأ الناتج عن التسرع وقلة الانتباه", "كل الخيارات السابقة خاطئة"],
        answer: "الخطأ المتكرر لدى المتعلم في تطبيق قاعدة ثابتة (مثلاً، عدم رفع الفاعل باستمرار)",
        rationale: "الخطأ النظامي هو الخطأ الذي يتكرر بشكل منتظم، وهو دليل على أن المتعلم يطبق قاعدة خاطئة أو ناقصة في ذهنه (تمثل خاطئ)، ويجب معالجته ديداكتيكياً."
    },
    {
        question: "في منهجية تدريس 'الخط والإملاء'، ما هي الأولوية التي ينبغي التركيز عليها في المراحل الأولى؟",
        options: ["التسريع في الكتابة لتوفير الوقت", "التركيز على مطابقة الصوت بالحرف (التطابق الصوتي-الخطّي) والوضوح والتقيد بالقياسات", "التزيين والزخرفة", "التحرير المباشر لنصوص طويلة"],
        answer: "التركيز على مطابقة الصوت بالحرف (التطابق الصوتي-الخطّي) والوضوح والتقيد بالقياسات",
        rationale: "الأولوية هي الجانب الآلي: التحكم في الأبعاد، ووضوح الحروف، ثم ربطها بالصوت المنطوق، وهذا هو أساس الإملاء الصحيح."
    },
    {
        question: "ما هي القيمة المضافة لتوظيف 'الخريطة الذهنية' (Mind Map) في حصص مراجعة المفاهيم؟",
        options: ["قياس الذكاء المنطقي فقط", "تنظيم الأفكار بشكل هرمي مرئي والربط بين المفاهيم لتسهيل الاسترجاع والفهم الشامل", "تقليص عدد الأهداف التعليمية", "كل الخيارات السابقة خاطئة"],
        answer: "تنظيم الأفكار بشكل هرمي مرئي والربط بين المفاهيم لتسهيل الاسترجاع والفهم الشامل",
        rationale: "الخرائط الذهنية تدعم التعلم البصري وتساعد الدماغ على تنظيم المعلومات المعقدة والربط بينها، مما يخدم المراجعة الشاملة للكفايات."
    },
    // ... (تتم إضافة الأسئلة المتبقية لديداكتيك العربية لتصل إلى 30 سؤالاً في هذا القسم) ...
    {
        question: "ما هو الهدف من 'شبكة معايير التقويم' (Grille d'évaluation) في تقويم إنتاج كتابي؟",
        options: ["الاعتماد على انطباع الأستاذ فقط", "توفير الموضوعية والشفافية وتحديد دقيق لجوانب الإتقان (الملائمة، الانسجام، السلامة اللغوية)", "قياس السرعة فقط", "تحديد مستوى المتعلم مقارنة بزميله"],
        answer: "توفير الموضوعية والشفافية وتحديد دقيق لجوانب الإتقان (الملائمة، الانسجام، السلامة اللغوية)",
        rationale: "شبكة المعايير تضمن أن التقويم يتم بناءً على معايير محددة ومتفق عليها، مما يزيد من موضوعية الحكم على مستوى إتقان الكفاية."
    },
    // ... (هنا يجب إضافة بقية الأسئلة لديداكتيك اللغة العربية) ...
    {
        question: "لتمكين المتعلم من التمييز بين أنواع النصوص (إخباري، وصفي، سردي)، ما هو النشاط الأكثر فعالية؟",
        options: ["حفظ تعريف كل نوع من الكتاب المدرسي", "تحليل نصوص متنوعة والتركيز على الخصائص البنيوية واللغوية المميزة لكل نوع", "إهمال هذا المكون والتركيز على النحو", "كل الخيارات السابقة خاطئة"],
        answer: "تحليل نصوص متنوعة والتركيز على الخصائص البنيوية واللغوية المميزة لكل نوع",
        rationale: "التحليل المقارن للنصوص يعزز فهم المتعلم لوظيفة اللغة وكيف تتغير البنية بتغير الهدف التواصلي (الخصائص البنيوية واللغوية هي المعيار الحاسم)."
    },
    // ... (السؤال 30 في ديداكتيك العربية) ...
    {
        question: "التقنية التي يستخدم فيها الأستاذ 'مذكرة التقصي' (Cahier d'investigation) لتحليل المعطيات التي توصل إليها المتعلمون تخدم هدفاً ديداكتيكياً يتمثل في:",
        options: ["التحقق من حضور المتعلم", "متابعة تطور الأداء المنهجي والعلمي للمتعلم وتكييف الأنشطة لتعزيز المنهجية المتبعة", "تصحيح الأخطاء اللغوية في الكتابة فقط", "تحديد مستوى الذكاء العاطفي"],
        answer: "متابعة تطور الأداء المنهجي والعلمي للمتعلم وتكييف الأنشطة لتعزيز المنهجية المتبعة",
        rationale: "مذكرة التقصي هي سجل لخطوات المتعلم في تطبيق المنهج العلمي، ومراجعتها تسمح للأستاذ بتقييم مدى إتقان المنهجية وليس فقط النتيجة النهائية."
    },

    // --------------------------------------------------------------------------------------
    // القسم 2: علوم التربية والمستجدات التربوية (30 سؤالاً - تتمة 28 سؤالاً هنا...)
    // --------------------------------------------------------------------------------------
    // ... (هنا يتم إدراج الـ 28 سؤالاً المتبقية من القسم الأول من الإجابة السابقة) ...

    // --------------------------------------------------------------------------------------
    // القسم 3: ديداكتيك اللغة الفرنسية (30 سؤالاً - سيتم إضافتها في الدفعة القادمة)
    // --------------------------------------------------------------------------------------
    // ... (سيتم ملء هذا القسم لاحقاً) ...

    // --------------------------------------------------------------------------------------
    // القسم 4: ديداكتيك النشاط العلمي والرياضيات (30 سؤالاً - سيتم إضافتها لاحقاً)
    // --------------------------------------------------------------------------------------
    // ... (سيتم ملء هذا القسم لاحقاً) ...

];

// ... (تستمر باقي الدوال الخاصة بالصفحات والحساب هنا، وهي: 
// generateQuiz, changePage, updatePaginationControls, submitQuiz, toggleRationale, shuffleArray)
// تأكد من لصق الدوال كاملة تحت مصفوفة الأسئلة.